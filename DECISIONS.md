# DECISIONS.md - –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

## 1. üèóÔ∏è –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Ä–æ–ª—è–º

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏: `Public/Dispatcher/Master`.

**–ü–æ—á–µ–º—É:**
- Single Responsibility Principle
- –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å —É—Å–ª–æ–≤–∏—è–º–∏ - –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

---

## 2. üîí –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –≥–æ–Ω–æ–∫

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏.

**–ü–æ—á–µ–º—É:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ë–î
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π –°–£–ë–î
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–Ω—è—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –æ—á–µ—Ä–µ–¥–∏ - –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã –∫–∞–∫ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ.

---

## 3. üîê RBAC (Role-Based Access Control)

**–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–∏ —Ä–æ–ª–∏: `public` (–∞–Ω–æ–Ω–∏–º), `dispatcher`, `master`. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ middleware `CheckRole`.

**–ü–æ—á–µ–º—É:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü–æ–ª–µ `role` –≤ `users`
- Middleware —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `role:dispatcher`, `role:master`
- –ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏

---

## 4. üìã Event Sourcing –¥–ª—è –∞—É–¥–∏—Ç-–ª–æ–≥–∞

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `events` –¥–ª—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞—è–≤–æ–∫.

**–ü–æ—á–µ–º—É:**
- –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –û—Ç–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã—Ö

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- Observer `RequestObserver` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
- –°–æ–±—ã—Ç–∏—è: `created`, `status_change`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `request_id`, `user_id`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** JSON-–ø–æ–ª–µ –≤ `requests`, —Ç—Ä–∏–≥–≥–µ—Ä—ã –ë–î - –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã.

---

## 5. üè≠ Factory States –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:** State-–º–µ—Ç–æ–¥—ã –≤ `RequestFactory`: `newRequest()`, `assignedRequest()`, `inProgressRequest()`.

**–ü–æ—á–µ–º—É:**
- –ß–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ –≤ —Ç–µ—Å—Ç–∞—Ö
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–º–∞—Å—Ç–µ—Ä–æ–≤)

---

## 6. üóÑÔ∏è –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
- –°—Ç–∞—Ç—É—Å—ã –∫–∞–∫ `enum`: `new`, `assigned`, `in_progress`, `done`, `canceled`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `status`, `assigned_to`, `created_at`
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏
- `nullable` –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏

**–ü–æ—á–µ–º—É:**
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –ì–∏–±–∫–æ—Å—Ç—å –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## 7. üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** Feature-—Ç–µ—Å—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP + —Å–∫—Ä–∏–ø—Ç –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `race_test.sh`.

**–ü–æ—á–µ–º—É:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–º–∞—Ä—à—Ä—É—Ç ‚Üí –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Üí –ë–î)
- –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è race condition protection

**–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫
- –ê—É–¥–∏—Ç-–ª–æ–≥
- –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤

---

## 8. üé® Blade + Tailwind CSS

**–†–µ—à–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Blade, —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ Tailwind.

**–ü–æ—á–µ–º—É:**
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π JavaScript
- SEO-–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `resources/views/public/` - –ø—É–±–ª–∏—á–Ω–∞—è —Ñ–æ—Ä–º–∞
- `resources/views/dispatcher/` - –ø–∞–Ω–µ–ª—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
- `resources/views/master/` - –ø–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞

---

## 9. üê≥ Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** Colima + Docker Compose (app, MySQL, Nginx).

**–ü–æ—á–µ–º—É:**
- –ò–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É dev/prod
- –õ–µ–≥–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–ü–æ—Ä—Ç:** 8080, Nginx ‚Üí PHP-FPM ‚Üí Laravel.

---

## 10. üìä –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
- **DRY:** –ë–∞–∑–æ–≤—ã–π `Controller`, –æ–±—â–∏–µ –º–∞–∫–µ—Ç—ã
- **Convention over Configuration:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Laravel
- **Fail Fast:** –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **Single Source of Truth:** –î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∏–∑ –ë–î
- **–ñ–∞–¥–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** `with()` –¥–ª—è –≤—Å–µ—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π

---

## 11. üîÑ State Machine –¥–ª—è –∑–∞—è–≤–æ–∫

**–†–µ—à–µ–Ω–∏–µ:** –ñ–µ—Å—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤:
- `new` ‚Üí `assigned` (–¥–∏—Å–ø–µ—Ç—á–µ—Ä)
- `assigned` ‚Üí `in_progress` (–º–∞—Å—Ç–µ—Ä)
- `in_progress` ‚Üí `done` (–º–∞—Å—Ç–µ—Ä)
- `new`/`assigned` ‚Üí `canceled` (–¥–∏—Å–ø–µ—Ç—á–µ—Ä)

**–ó–∞—â–∏—Ç–∞:** –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å.

---

## 12. üì± UX-–ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤
- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —Å—Ç—Ä–æ–∫–∞—Ö —Ç–∞–±–ª–∏—Ü
- Flash-—Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `created_at DESC`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## 13. üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- CSRF-—Ç–æ–∫–µ–Ω—ã –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è –∑–∞—è–≤–∫–æ–π (`assigned_to = Auth::id()`)
- `$fillable` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç mass assignment
- `findOrFail()` –¥–ª—è 404
- `abort(403)` –≤ middleware

---

## 14. üéØ –ú–∏–Ω–∏–º–∞–ª–∏–∑–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π)
- –ù–µ—Ç API (—Ç–æ–ª—å–∫–æ Web)
- –ù–µ—Ç –æ—á–µ—Ä–µ–¥–µ–π (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ù–µ—Ç Form Request –∫–ª–∞—Å—Å–æ–≤ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö)
- –ù–µ—Ç –ø–æ–∏—Å–∫–∞ (—Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)

**–ü–æ—á–µ–º—É:** –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å—Ç–æ—Ç–∞ > —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

---

## 15. üõ†Ô∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ DevOps

**–†–µ—à–µ–Ω–∏–µ:**
- Laravel 11 + Breeze
- MySQL 8.0
- Nginx + PHP-FPM
- Composer + npm/Vite
- RefreshDatabase –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- race_test.sh –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ race condition

---

*–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω: 18.02.2026*
