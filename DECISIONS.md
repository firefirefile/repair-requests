# DECISIONS.md - –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

## 1. üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Ä–æ–ª—è–º

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏: `Public/`, `Dispatcher/`, `Master/`.

**–ü–æ—á–µ–º—É:**
- Single Responsibility Principle
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

---

## 2. üîí –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Race Condition Protection)

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏.

**–ü–æ—á–µ–º—É:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ë–î
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±–æ–π –°–£–ë–î
- –ü—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –æ—á–µ—Ä–µ–¥–∏ ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã –∫–∞–∫ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ.

---

## 3. üîê RBAC (Role-Based Access Control)

**–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–∏ —Ä–æ–ª–∏: `public`, `dispatcher`, `master`. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ middleware `CheckRole`.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü–æ–ª–µ `role` –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
- Middleware —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `role:dispatcher`, `role:master`
- –ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏

**–ü–æ—á–µ–º—É:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å + —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

---

## 4. üìã Event Sourcing –¥–ª—è –∞—É–¥–∏—Ç-–ª–æ–≥–∞

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `events` –¥–ª—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞—è–≤–æ–∫.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- Observer `RequestObserver` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
- –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π: `created`, `status_change`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `request_id` –∏ `user_id`

**–ü–æ—á–µ–º—É:**
- –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –û—Ç–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã—Ö

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** JSON-–ø–æ–ª–µ –≤ `requests`, —Ç—Ä–∏–≥–≥–µ—Ä—ã –ë–î ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã.

---

## 5. üóÑÔ∏è –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –°—Ç–∞—Ç—É—Å—ã –∫–∞–∫ `enum`: `new`, `assigned`, `in_progress`, `done`, `canceled`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `status`, `assigned_to`, `created_at`
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- `nullable` –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏

**–ü–æ—á–µ–º—É:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –≥–∏–±–∫–æ—Å—Ç—å.

---

## 6. üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** Feature-—Ç–µ—Å—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP + —Å–∫—Ä–∏–ø—Ç `race_test.sh` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—â–∏—Ç—ã –æ—Ç –≥–æ–Ω–æ–∫.

**–ü–æ—á–µ–º—É:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–º–∞—Ä—à—Ä—É—Ç ‚Üí –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Üí –ë–î)
- –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ù–∞–≥–ª—è–¥–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è race condition protection

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫, –∑–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫, –∞—É–¥–∏—Ç-–ª–æ–≥, —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤.

---

## 7. üê≥ Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** Colima + Docker Compose (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, MySQL, Nginx).

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –ü–æ—Ä—Ç 8080
- Nginx ‚Üí PHP-FPM ‚Üí Laravel
- –ò–∑–æ–ª—è—Ü–∏—è –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É dev/prod

**–ü–æ—á–µ–º—É:** –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–π.

---

